<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='utf-8' />
        <meta http-equiv='X-UA-Compatible' content='IE=edge' />
        <title>Etymologist</title>
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='stylesheet' href='../resources/VitalStyle.css' />

        <style>
            .alt-button {
                background-color: var(--primary-colour);
                box-shadow: none;
            }

            .alt-button:focus,
            .alt-button:hover {
                background-color: var(--secondary-colour);
            }

            .buttons-div {
                display: flex;
                flex-wrap: wrap;
                column-gap: 3px;
            }

            .morpheme-description {
                margin: 4px 0px 12px 12px;
                padding-left: 4px;
                border-left: 6px solid var(--accent2);
                border-radius: 4px;
            }

            #info-div {
                margin: 0;
            }

            #morphemes-categories {
                margin-left: 20px;
            }
        </style>
    </head>
    <body>
        <h1 id='page-title'>Etymologist</h1>

        <!-- Settings -->
        <details id='settings'>
            <summary id='settings-summary'>Settings</summary>
        </details>

        <hr>

        <!-- Page main body -->
        <details open>
            <summary id='morphemes-summary'>Morphemes</summary>

            <div id='morphemes-categories'>
                <details>
                    <summary id='prefixes'>Prefixes</summary>
                    <div id='prefixes-div' class='buttons-div'></div>
                </details>

                <details>
                    <summary id='roots'>Roots</summary>
                    <div id='roots-div' class='buttons-div'></div>
                </details>

                <details>
                    <summary id='suffixes'>Suffixes</summary>
                    <div id='suffixes-div' class='buttons-div'></div>
                </details>
            </div>
        </details>
    
        <details>
            <summary id='words-summary'>Words</summary>
            <div id='words-div' class='buttons-div'></div>
        </details>

        <hr>
        
        <p id='info-help'>Click on a morpheme or a word for details.</p>

        <hr>

        <div id='info-div'></div>
        <p id='words-with' style='display: none;'>Words with </p>

        <p id='author' class='box' style='font-style: italic'>
            Made by Vitaly Pavlovich Ulyanov.
        </p>
        <!-- –ê–≤—Ç–æ—Ä ‚Äî –í–∏—Ç–∞–ª–∏–π –ü–∞–≤–ª–æ–≤–∏—á –£–ª—å—è–Ω–æ–≤. -->

        <script src='../resources/VitalLogic.js'></script>
        <script>
            // Elements
            /** @type {HTMLDivElement} */
            let prefixesDiv = document.getElementById('prefixes-div');
            /** @type {HTMLDivElement} */
            let rootsDiv = document.getElementById('roots-div');
            /** @type {HTMLDivElement} */
            let suffixesDiv = document.getElementById('suffixes-div');
            /** @type {HTMLDivElement} */
            let wordsDiv = document.getElementById('words-div');
            /** @type {HTMLDivElement} */
            let infoDiv = document.getElementById('info-div');
            /** @type {HTMLParagraphElement} */
            let wordsWith = document.getElementById('words-with');
    
            // Types
            /**
             * @typedef Morpheme
             * @property {string} name
             * @property {string} type
             * @property {string} origin
             * @property {string} meaning
            */
    
            /**
             * @typedef Word
             * @property {string} name
             * @property {string[]} morphemes
            */
    
            // Variables
            /** @type {{[s: string]: Morpheme}} */
            let morphemes = {};
    
            /** @type {Word[]} */
            let words = [];
    
            // Functions
            /**
             * @param {string} name
             * @param {string} origin
             * @param {string} meaning
            */
            function addPrefix(name, origin, meaning) {
                morphemes[name + '-'] = {
                    name: name + '-',
                    type: 'prefix',
                    origin: origin,
                    meaning: meaning
                };
            }
    
            /**
             * @param {string} name
             * @param {string} origin
             * @param {string} meaning
            */
            function addRoot(name, origin, meaning) {
                morphemes[name] = {
                    name: name,
                    type: 'root',
                    origin: origin,
                    meaning: meaning
                };
            }

            /**
             * @param {string} name
             * @param {string} origin
             * @param {string} meaning
            */
            function addSuffix(name, origin, meaning) {
                morphemes['-' + name] = {
                    name: '-' + name,
                    type: 'suffix',
                    origin: origin,
                    meaning: meaning
                };
            }
    
            /**
             * @param {string} name
             * @param {string[]} morphemes
            */
            function addWord(name, morphemes) {
                words.push(
                    {
                        name: name,
                        morphemes: morphemes
                    }
                );
            }
    
            function fillMorphemesList() {
                // Clear morphemes div
                [prefixesDiv, rootsDiv, suffixesDiv].forEach(div => {
                    clearDiv(div)
                });
    
                // Fill list with morphemes
                for (const key in morphemes) {
                    const m = morphemes[key];

                    /** @type {HTMLButtonElement} */
                    let morpheme = undefined;

                    switch (m.type) {
                        case 'prefix':
                            morpheme = prefixesDiv.appendChild(
                                document.createElement('button')
                            );
                            break;
                        case 'root':
                            morpheme = rootsDiv.appendChild(
                                document.createElement('button')
                            );
                            break;
                        case 'suffix':
                            morpheme = suffixesDiv.appendChild(
                                document.createElement('button')
                            );
                            break;
                        default:
                            continue;
                    }
    
                    morpheme.classList = 'alt-button';
                    morpheme.textContent = m.name;
                    morpheme.addEventListener('click', function (event) {
                        // Clear info div
                        clearDiv(infoDiv);
    
                        // Fill this morpheme's info
                        addMorphemeInfo(m);
                    });
                }
            }
    
            function fillWordsList() {
                // Clear words div
                clearDiv(wordsDiv);
    
                // Fill list with words
                for (const w of words) {
                    let word = wordsDiv.appendChild(
                        document.createElement('button')
                    );
                    word.textContent = w.name;
                    word.classList = 'alt-button';
                    word.addEventListener('click', function () {
                        // Clear info div
                        clearDiv(infoDiv);

                        // Fill this word's info
                        addWordInfo(w);
                    });
                }
            }

            /**
             * @param {Morpheme} morpheme
            */
            function addMorphemeInfo(morpheme) {
                if (!morpheme) return;

                // General information about the morpheme
                let heading = infoDiv.appendChild(
                    document.createElement('h3')
                );
                heading.textContent = morpheme.name;

                let description = infoDiv.appendChild(
                    document.createElement('div')
                );
                description.classList = 'morpheme-description';

                let details = description.appendChild(
                    document.createElement('p')
                );

                let type = details.appendChild(
                    document.createElement('b')
                );
                type.textContent = morpheme.type.toUpperCase();

                let preOrigin = details.appendChild(
                    document.createElement('span')
                );
                preOrigin.textContent = ' [';

                let origin = details.appendChild(
                    document.createElement('i')
                );
                origin.textContent = `${morpheme.origin}`;

                let meaning = details.appendChild(
                    document.createElement('span')
                );
                meaning.textContent = `]: ${morpheme.meaning}.`;

                // Words with this morpheme
                let container = description.appendChild(
                    document.createElement('details')
                );

                let summary = container.appendChild(
                    document.createElement('summary')
                );
                summary.textContent = wordsWith.textContent;

                let summaryMorpheme = summary.appendChild(
                    document.createElement('b')
                );
                summaryMorpheme.textContent = morpheme.name;

                let list = container.appendChild(
                    document.createElement('div')
                );
                list.classList = 'buttons-div';

                for (const w of words) {
                    if (w.morphemes.includes(morpheme.name)) {
                        let word = list.appendChild(
                            document.createElement('button')
                        );
                        word.textContent = w.name;
                        word.classList = 'alt-button';
                        word.addEventListener('click', function () {
                            // Clear info div
                            clearDiv(infoDiv);

                            // Fill this word's info
                            addWordInfo(w);
                        });
                    }
                }
            }

            /**
             * @param {Word} word
            */
            function addWordInfo(word) {
                if (!word) return;

                // Add heading
                let heading = infoDiv.appendChild(
                    document.createElement('h2')
                );
                heading.textContent = word.name.toUpperCase() + ':';

                // Add info about each morpheme
                word.morphemes.forEach(m => addMorphemeInfo(morphemes[m]));
            }

            /**
             * @param {HTMLDivElement} div
            */
            function clearDiv(div) {
                while (div.hasChildNodes()) div.lastChild.remove();
            }
    
            // Prefixes
            addPrefix('[1] in', 'Latin', 'not');
            addPrefix('[2] in', 'Latin', 'in');
            addPrefix('ad', 'Latin', 'to, toward; with regard to, in relation to');
            addPrefix('bio', 'Greek', '[from bios] life; pertaining to living organisms or their constituents');
            addPrefix('de', 'Latin', 'down, down from, from, off; concerning; totally');
            addPrefix('micro', 'Greek', '[from mikros] small');
            addPrefix('pre', 'Latin', 'before in time or place');
            addPrefix('re', 'Latin', 'again; back; anew, against');
            addPrefix('sub', 'Latin', 'under, beneath; behind; from under');
            addPrefix('trans', 'Latin', 'across, beyond; over');
    
            // Roots
            addRoot('agere', 'Latin', 'to set in motion, drive, drive forward; to do, perform');
            addRoot('bios', 'Greek', 'life');
            addRoot('caro', 'Latin', '[genitive carnis] flesh');
            addRoot('fluere', 'Latin', 'to flow');
            addRoot('herba', 'Latin', 'a plant');
            addRoot('manus', 'Latin', 'hand');
            addRoot('nihil', 'Latin', '[also nil] nothing');
            addRoot('pendere', 'Latin', 'to hang, cause to hang; weigh');
            addRoot('scribere', 'Latin', 'to write');
            addRoot('vitrum', 'Latin', 'glass');
            addRoot('vorare', 'Latin', 'to devour, swallow');

            // Suffixes
            addSuffix('ate', 'Latin', 'suffix forming nouns (from Latin words in -atus, -atum), adjectives (from Latin past participles in -atus, -ata), and verbs (from Latin verbs in -are)');
            addSuffix('fy', 'Latin', 'suffix meaning ‚Äòmake, make into‚Äô; from Latin -ficare, combining form of facere ‚Äòto make‚Äô');
            addSuffix('ion', 'Latin', '[also -tion, -ation] noun of state, condition, or action');
            addSuffix('osus', 'Latin', 'nouns meaning ‚Äòhaving, full of, having to do with, doing, inclined to‚Äô');
    
            // Words
            addWord('annihilate', ['ad-', 'nihil', '-ate']);
            addWord('carnivorous', ['caro', 'vorare', '-osus']);
            addWord('depend', ['de-', 'pendere']);
            addWord('describe', ['de-', 'scribere']);
            addWord('fluent', ['fluere']);
            addWord('herbivorous', ['herba', 'vorare', '-osus']);
            addWord('influence', ['[2] in-', 'fluere']);
            addWord('inscribe', ['[2] in-', 'scribere']);
            addWord('manuscript', ['manus', 'scribere']);
            addWord('microbe', ['micro-', 'bios']);
            addWord('pendulum', ['pendere']);
            addWord('prescribe', ['pre-', 'scribere']);
            addWord('reincarnation', ['re-', '[2] in-', 'caro', '-ion']);
            addWord('script', ['scribere']);
            addWord('subscribe', ['sub-', 'scribere']);
            addWord('suspend', ['sub-', 'pendere']);
            addWord('transaction', ['trans-', 'agere', '-ion']);
            addWord('transcribe', ['trans-', 'scribere']);
            addWord('vitrify', ['vitrum', '-fy']);
    
            // Generate lists
            fillMorphemesList();
            fillWordsList();

            // Translations
            generateLanguagesList([
                {
                    name: 'English [Vitaly Ulyanov]',
                    langTags: ['en', 'en-AU', 'en-BZ', 'en-CA', 'en-CB', 'en-GB', 'en-IE', 'en-JM', 'en-NZ', 'en-PH', 'en-TT', 'en-US', 'en-ZA', 'en-ZW'],
                    elements: [
                        {
                            "id": "page-title",
                            "childNodesTexts": [
                                "Etymologist"
                            ]
                        },
                        {
                            "id": "settings-summary",
                            "childNodesTexts": [
                                "Settings"
                            ]
                        },
                        {
                            "id": "fontLabel",
                            "childNodesTexts": [
                                "Font"
                            ]
                        },
                        {
                            "id": "fontInput",
                            "childNodesTexts": [],
                            "placeholder": "Type a font's name and press Enter"
                        },
                        {
                            "id": "primLabel",
                            "childNodesTexts": [
                                "Background colour"
                            ]
                        },
                        {
                            "id": "secLabel",
                            "childNodesTexts": [
                                "Text colour"
                            ]
                        },
                        {
                            "id": "acc1Label",
                            "childNodesTexts": [
                                "Accent colour 1"
                            ]
                        },
                        {
                            "id": "acc2Label",
                            "childNodesTexts": [
                                "Accent colour 2"
                            ]
                        },
                        {
                            "id": "loadLabel",
                            "childNodesTexts": [
                                "üìÅ Load colours"
                            ]
                        },
                        {
                            "id": "saveColoursButton",
                            "childNodesTexts": [
                                "üíæ Save colours"
                            ]
                        },
                        {
                            "id": "exportLang",
                            "childNodesTexts": [
                                "üåê Export texts for translation"
                            ]
                        },
                        {
                            "id": "morphemes-summary",
                            "childNodesTexts": [
                                "Morphemes"
                            ]
                        },
                        {
                            "id": "prefixes",
                            "childNodesTexts": [
                                "Prefixes"
                            ]
                        },
                        {
                            "id": "roots",
                            "childNodesTexts": [
                                "Roots"
                            ]
                        },
                        {
                            "id": "suffixes",
                            "childNodesTexts": [
                                "Suffixes"
                            ]
                        },
                        {
                            "id": "words-summary",
                            "childNodesTexts": [
                                "Words"
                            ]
                        },
                        {
                            "id": "info-help",
                            "childNodesTexts": [
                                "Click on a morpheme or a word for details."
                            ]
                        },
                        {
                            "id": "words-with",
                            "childNodesTexts": [
                                "Words with "
                            ]
                        },
                        {
                            "id": "author",
                            "childNodesTexts": [
                                "Made by Vitaly Pavlovich Ulyanov."
                            ]
                        },
                        {
                            "id": "fullscreenButton",
                            "childNodesTexts": [
                                "‚ñ≤",
                                "Fullscreen"
                            ]
                        }
                    ]
                },
                {
                    name: '–†—É—Å—Å–∫–∏–π [–í–∏—Ç–∞–ª–∏–π –£–ª—å—è–Ω–æ–≤]',
                    langTags: ['ru', 'ru-RU'],
                    elements: [
                        {
                            "id": "page-title",
                            "childNodesTexts": [
                                "–≠—Ç–∏–º–æ–ª–æ–≥"
                            ]
                        },
                        {
                            "id": "settings-summary",
                            "childNodesTexts": [
                                "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
                            ]
                        },
                        {
                            "id": "fontLabel",
                            "childNodesTexts": [
                                "–®—Ä–∏—Ñ—Ç"
                            ]
                        },
                        {
                            "id": "fontInput",
                            "childNodesTexts": [],
                            "placeholder": "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ Enter"
                        },
                        {
                            "id": "primLabel",
                            "childNodesTexts": [
                                "–¶–≤–µ—Ç —Ñ–æ–Ω–∞"
                            ]
                        },
                        {
                            "id": "secLabel",
                            "childNodesTexts": [
                                "–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞"
                            ]
                        },
                        {
                            "id": "acc1Label",
                            "childNodesTexts": [
                                "–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç 1"
                            ]
                        },
                        {
                            "id": "acc2Label",
                            "childNodesTexts": [
                                "–ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç 2"
                            ]
                        },
                        {
                            "id": "loadLabel",
                            "childNodesTexts": [
                                "üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ü–≤–µ—Ç–∞"
                            ]
                        },
                        {
                            "id": "saveColoursButton",
                            "childNodesTexts": [
                                "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–≤–µ—Ç–∞"
                            ]
                        },
                        {
                            "id": "exportLang",
                            "childNodesTexts": [
                                "üåê –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞"
                            ]
                        },
                        {
                            "id": "morphemes-summary",
                            "childNodesTexts": [
                                "–ú–æ—Ä—Ñ–µ–º—ã"
                            ]
                        },
                        {
                            "id": "prefixes",
                            "childNodesTexts": [
                                "–ü—Ä–∏—Å—Ç–∞–≤–∫–∏"
                            ]
                        },
                        {
                            "id": "roots",
                            "childNodesTexts": [
                                "–ö–æ—Ä–Ω–∏"
                            ]
                        },
                        {
                            "id": "suffixes",
                            "childNodesTexts": [
                                "–°—É—Ñ—Ñ–∏–∫—Å—ã"
                            ]
                        },
                        {
                            "id": "words-summary",
                            "childNodesTexts": [
                                "–°–ª–æ–≤–∞"
                            ]
                        },
                        {
                            "id": "info-help",
                            "childNodesTexts": [
                                "–î–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —â—ë–ª–∫–Ω–∏—Ç–µ –ø–æ –º–æ—Ä—Ñ–µ–º–µ –∏–ª–∏ —Å–ª–æ–≤—É."
                            ]
                        },
                        {
                            "id": "words-with",
                            "childNodesTexts": [
                                "–°–ª–æ–≤–∞ —Å "
                            ]
                        },
                        {
                            "id": "author",
                            "childNodesTexts": [
                                "–ê–≤—Ç–æ—Ä ‚Äî –í–∏—Ç–∞–ª–∏–π –ü–∞–≤–ª–æ–≤–∏—á –£–ª—å—è–Ω–æ–≤."
                            ]
                        },
                        {
                            "id": "fullscreenButton",
                            "childNodesTexts": [
                                "‚ñ≤",
                                "–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω"
                            ]
                        }
                    ]
                }
            ]);
        </script>
    </body>
</html>
